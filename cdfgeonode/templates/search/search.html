{% extends "site_base.html" %}
{% load i18n %}
{% load staticfiles %}
{% load url from future %}

{% block title %} {% trans "Search" %} - {{ block.super }} {% endblock %}
{% block custom_menu %}
{% include "menu/custom_menu.html"%}

{% endblock %}
{% block body_class %}search{% endblock %}

{% block custom_search_form %}

  <div class="tab">SEARCH</div>
 <div class="row search-section">
  <div class="col-md-12  geo-search">
<form class="" id="search" action="{% url "search" %}" >

    <div class="input-group">
      {% if HAYSTACK_SEARCH %}

      <input id="search_input" type="text" placeholder="Search" class="form-group" name="q">
      {% else %}
      <input id="search_input" type="text" placeholder="Search" class="form-control" name="title__icontains">
      {% endif %}
      <span class="input-group-btn">
        <button class="btn btn-default" type="submit"><i class="fa fa-search"></i></button>
      </span>

  </div>
</form>
</div>
</div>
{% endblock%}

{% block body_outer %}
  <div class="page-header">
    <h2>{% trans "Search" %} <span ng-if="text_query != ''">:</span> <span ng-bind="text_query"></span></h2>
  </div>
  {% with include_type_filter='true' %}
  {% with header='Type' %}
  {% with filter='type__in' %}
  {% include "search/_search_content.html" %}
  {% endwith %}
  {% endwith %}
  {% endwith %}
{% endblock %}

{% block extra_script %}
  {% if GEONODE_SECURITY_ENABLED %}
    {% include "_permissions_form_js.html" %}
  {% endif %}
  <script type="text/javascript">
    {% if HAYSTACK_SEARCH %}
    SEARCH_URL = '{% url 'api_get_search' api_name='api' resource_name='base' %}'
    {% else %}
    SEARCH_URL = '{% url 'api_dispatch_list' api_name='api' resource_name='base' %}'
    {% endif %}
  </script>
  {% with include_spatial='true' %}
  {% include 'search/search_scripts.html' %}
  {% endwith %}
{% endblock extra_script %}
